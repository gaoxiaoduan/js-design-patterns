<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <button id="btn">执行命令</button>
    <script>
      let MacroCommand = function () {
        return {
          commandList: [],
          add(command) {
            this.commandList.push(command);
          },
          execute() {
            this.commandList.forEach((item) => {
              item.execute();
            });
          },
        };
      };

      let openAcCommand = {
        execute() {
          console.log("打开空调");
        },
      };

      let openSoundCommand = {
        execute() {
          console.log("打开音响");
        },
      };

      // 命令集合1
      let MacroCommand1 = MacroCommand();
      MacroCommand1.add(openAcCommand);
      MacroCommand1.add(openSoundCommand);

      let closeCommand = {
        execute() {
          console.log("关门");
        },
      };

      let openPCCommand = {
        execute() {
          console.log("打开电脑");
        },
      };

      let openQQCommand = {
        execute() {
          console.log("打开QQ");
        },
      };

      // 命令集合2
      let MacroCommand2 = MacroCommand();
      MacroCommand2.add(closeCommand);
      MacroCommand2.add(openPCCommand);
      MacroCommand2.add(openQQCommand);

      // 把所有命令组合成一个超级命令
      let macroCommandPro = MacroCommand();
      macroCommandPro.add(MacroCommand1);
      macroCommandPro.add(MacroCommand2);

      let btn = document.querySelector("#btn");
      btn.onclick = function () {
        macroCommandPro.execute(); // 深度优先搜索
        // 打开空调;
        // 打开音响;
        // 关门;
        // 打开电脑;
        // 打开QQ;
      };
    </script>
  </body>
</html>
